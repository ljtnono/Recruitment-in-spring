

## elasticsearch安装及启动异常解决方式

elasticsearch.yml配置文件

```yaml
bootstrap.memory_lock: false
bootstrap.system_call_filter: false
cluster.initial_master_nodes: ["node-1"]
# 数据存储路径
path.data: /xxx/xx/data
path.logs: /xxx/xx/logs
network.host: 0.0.0.0
http.port: 9200
http.cors.enabled: true
http.cors.allow-origin: "*"
```

* **max virtual memory areas vm.max_map_count [65530] is too low, increase to at least [262144]**

  ```shell
  # 临时修改
  sysctl -w vm.max_map_count=262144
  # 永久修改
  echo "vm.max_map_count=262144" >> /etc/sysctl.conf
  sysctl -p /etc/sysctl.conf
  ```
  
* **max file descriptors [4096] for elasticsearch process is too low, increase to at least [65535]**

  ```shell
  vim /etc/security/limits.conf
  # 添加以下内容 其中elastic是启动elasticsearch的用户名
  elastic hard nofile 65536
  elastic soft nofile 65536
  ```

## Centos7网卡配置

```bash
cd /etc/sysconfig/network-scripts
# 在此目录下找到一个具有如下内容的文件 一般为 ifcfg-ens33 其中 ens33为网卡名
TYPE=Ethernet
PROXY_METHOD=none
BROWSER_ONLY=no
#BOOTPROTO=dhcp
DEFROUTE=yes
IPV4_FAILURE_FATAL=no
IPV6INIT=yes
IPV6_AUTOCONF=yes
IPV6_DEFROUTE=yes
IPV6_FAILURE_FATAL=no
#IPV6_ADDR_GEN_MODE=stable-privacy
NAME=ens33
UUID=c656103e-e2e0-4d49-914f-00b7cbab9568
DEVICE=ens33
ONBOOT=yes
# 网络配置
BOOTPROTO=static # 静态ip
IPADDR=192.168.172.107 # ip地址
NETMASK=255.255.255.0 # 子网掩码
GATEWAY=192.168.172.1 # 网关
DNS1=8.8.8.8 # DNS
DNS2=192.168.172.1 # DNS
ZONE=public
```

```bash
systemctl restart network
```


## firewall 相关操作

### 永久开启某个端口

```shell
firewall-cmd --zone=public --add-port=27017/tcp --permanent
```

### 重新加载防火墙

```shell
firewall-cmd --reload
```

